<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NEJ模块调度系统</title>
<link rel="stylesheet" href="../lib/dist/css/regular-ui.flat.min.css">
</head>
<body>
<div id="root"></div>
<script src="../lib/regular.min.js"></script>
<script src="../lib/dist/js/regular-ui.min.js"></script>
<script src="../lib/define.js"></script>
<script>
NEJ.define([
    'base/klass',
    'base/element',
    'util/dispatcher/dispatcher',
    './module/blog/index.js'
], function(_k, _e, _t, _$$BlogModule,_p) {
    _t._$startup({
        rules: {
            rewrite: {
                404: '/m/blog/'
            },
            title: {
                '/m/blog/': '博客',
                '/m/setting/': '设置'
            },
            alias: {
                'system': '/m',
                'blog': '/m/blog/',
                'setting': '/m/setting/',
                'system-tab': '/?/tab/'
            }
        },
        modules: {
            '/?/tab/': 'module/tab/index.html',

            '/m': {
                module: 'module/layout/system/index.html',
                composite: {
                    tab: '/?/tab/'
                }
            },
            '/m/blog/': _$$BlogModule,
            '/m/setting/': 'module/setting/index.html'
        },
        onbeforechange: function(_options) {
            var _umi = _options.path||'';
            if (!!_umi&&
                _umi.indexOf('/?')<0&&
                _umi.indexOf('/m')<0) {
                _options.path = '/m'+_umi;
            }
        }
    });
});
</script>
</body>
</html>
